# 订阅接口使用说明

## 总体约束

不能与[Profiling数据采集接口](Profiling数据采集接口.md)的接口交叉调用：[aclprofModelSubscribe](aclprofModelSubscribe.md)接口和[aclprofModelUnSubscribe](aclprofModelUnSubscribe.md)接口之间不能调用[aclprofInit](aclprofInit.md)接口、[aclprofStart](aclprofStart.md)接口、[aclprofStop](aclprofStop.md)接口和[aclprofFinalize](aclprofFinalize.md)接口。

## 接口约束说明

-   **接口调用要求**：
    -   [aclprofModelSubscribe](aclprofModelSubscribe.md)接口在模型执行之前调用，若在模型执行过程中调用[aclprofModelSubscribe](aclprofModelSubscribe.md)接口，Profiling采集到的数据为调用[aclprofModelSubscribe](aclprofModelSubscribe.md)接口之后的数据，可能导致数据不完整。
    -   [aclprofModelSubscribe](aclprofModelSubscribe.md)接口需与[aclprofModelUnSubscribe](aclprofModelUnSubscribe.md)接口配对使用，不能在调用[aclprofModelUnSubscribe](aclprofModelUnSubscribe.md)接口前，多次调用

        [aclprofModelSubscribe](aclprofModelSubscribe.md)接口重复订阅相同的模型。

    -   不能调用[aclprofModelSubscribe](aclprofModelSubscribe.md)接口订阅不存在的模型ID。
    -   不能调用[aclprofModelUnSubscribe](aclprofModelUnSubscribe.md)接口取消订阅不存在的模型ID或未订阅过的模型ID。
    -   如果在同一个Device上加载了多个模型，只能对多个模型下发同样的订阅配置。

-   **接口调用顺序**：
    -   **建议的接口调用顺序如下**：

        模型加载--\>[aclprofModelSubscribe](aclprofModelSubscribe.md)接口--\>[aclprofGetOpDescSize](aclprofGetOpDescSize.md)接口--\>[aclprofGetOpNum](aclprofGetOpNum.md)接口--\>[aclprofGetOpType](aclprofGetOpType.md)/[aclprofGetOpName](aclprofGetOpName.md)/[aclprofGetOpStart](aclprofGetOpStart.md)/[aclprofGetOpEnd](aclprofGetOpEnd.md)/[aclprofGetOpDuration](aclprofGetOpDuration.md)/[aclprofGetModelId](aclprofGetModelId.md)接口--\>[aclprofModelUnSubscribe](aclprofModelUnSubscribe.md)接口

    -   **错误的接口调用顺序示例如下**，以重复定义同一个模型为例：

        模型1加载--\>[aclprofModelSubscribe](aclprofModelSubscribe.md)接口\(指定模型1\)--\>[aclprofModelSubscribe](aclprofModelSubscribe.md)接口\(指定模型1\)--\>[aclprofModelUnSubscribe](aclprofModelUnSubscribe.md)接口

